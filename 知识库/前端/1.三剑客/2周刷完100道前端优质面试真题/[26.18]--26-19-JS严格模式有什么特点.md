# JS严格模式有什么特点

## 目录

- [背景介绍](#背景介绍)
- [严格模式的开启方式](#严格模式的开启方式)
- [严格模式的主要特点](#严格模式的主要特点)
  - [1\. 全局变量必须先声明](#1-全局变量必须先声明)
  - [2\. 禁止使用with](#2-禁止使用with)
  - [3\. 创建eval作用域](#3-创建eval作用域)
  - [4\. 禁止this指向window](#4-禁止this指向window)
  - [5\. 函数参数不能重名](#5-函数参数不能重名)
- [AI 总结](#ai-总结)

## 背景介绍

JavaScript语言设计之初（90年代）比较简单，主要是为了满足网页的脚本和交互需求。由于设计简单，存在很多不合理、不严谨、不安全的地方，有很多漏洞和反人类的设计，导致了很多问题。

随着近年来的发展，通过构建工具、错误提示工具、打包工具，以及ES6、ES7等新标准的发展，逐渐在弥补这些问题。但有些问题一直存在，特别是在生产环境中，打包出来的代码还需要满足ES5标准，因此一般在生产环境会使用严格模式来规避这些问题。

**关于学习的建议**：
- 遵循**二八原则**：花费20%的成本去掌握80%的知识
- 学习曲线不是直线而是曲线：一开始慢，中间快，后期又慢
- 不要追求100%完美，找出自己的价值点并发挥出来
- 严格模式细节要求很多，面试时掌握重点即可

## 严格模式的开启方式

严格模式通过 `'use strict'` 开启，有两种方式：

**1\. 全局开启**
```javascript
'use strict'
// 整个代码都在严格模式下运行
```

**2\. 函数内开启**
```javascript
function fn() {
  'use strict'
  // 只在函数内生效
}
```

在HTML中的script标签内：
```html
<script>
  'use strict'
  // 代码必须符合严格模式要求
</script>
```

## 严格模式的主要特点

### 1\. 全局变量必须先声明

**非严格模式**：可以直接使用未声明的变量，会造成全局变量污染
```javascript
// 非严格模式下可以运行
n = 10
console.log(n) // 10
```

**严格模式**：必须显式声明变量
```javascript
'use strict'
n = 10 // 报错：n is not defined
```

必须这样写：
```javascript
'use strict'
let n = 10 // 正确
console.log(n)
```

**重要性**：在函数里直接定义未声明的变量会造成全局变量污染，这是非常不严谨的做法。

### 2\. 禁止使用with

`with` 语句会改变变量的取值主体，造成代码不易读且容易出错。

**非严格模式示例**：
```javascript
let object = {
  x: 100,
  y: 200
}

// 正常访问
console.log(object.x) // 100

// 使用with
with(object) {
  console.log(x) // 100
  console.log(y) // 200
  // 在with内部，x和y直接取object的属性
}
```

**问题**：with会改变变量的取值主体，与外部代码概念完全不同，造成困扰。

**严格模式**：
```javascript
'use strict'
with(object) { // 报错：Strict mode code may not include a with statement
  console.log(x)
}
```

### 3\. 创建eval作用域

`eval` 在严格模式下有自己独立的作用域，不会污染外部作用域。

**非严格模式**：
```javascript
let x = 10
eval('var x = 20; console.log(x)') // 20
console.log(x) // 10
```

**严格模式**：
```javascript
'use strict'
let x = 10
eval('var x = 20; console.log(x)') // 20
console.log(x) // 10
// eval内部有自己单独的作用域，不影响外部
```

**注意**：`eval` 不推荐使用，除非特殊情况，因为它性能有问题。

### 4\. 禁止this指向window

这是实践中非常常用的特性，一定要记住。

**非严格模式**：
```javascript
function fn() {
  console.log(this) // window
}
fn()
```

**严格模式**：
```javascript
'use strict'
function fn() {
  console.log(this) // undefined
}
fn()
```

**改变this的值**：
```javascript
'use strict'
function fn() {
  console.log(this)
}
fn.call({}) // {} - 可以通过call改变this
```

**重要性**：如果函数的this不能指向window，会避免很多困扰，使JavaScript变得更加简单。

### 5\. 函数参数不能重名

**非严格模式**：
```javascript
function fn(x, x, y) {
  console.log(x, y)
}
fn(10, 20) // 语法上没有问题，但不合理
```

**严格模式**：
```javascript
'use strict'
function fn(x, x, y) { // 报错：Duplicate parameter name not allowed in this context
  console.log(x, y)
}
```

严格模式下，重复的参数名称不被允许。

## AI 总结

JavaScript严格模式通过 `'use strict'` 开启，主要用于规避ES5标准下的语言设计缺陷。五个核心特点包括：

1. **强制声明变量**：防止全局变量污染
2. **禁用with语句**：避免作用域混乱
3. **隔离eval作用域**：防止变量泄漏
4. **this不指向window**：函数调用时this为undefined，避免意外的全局对象访问
5. **禁止参数重名**：提高代码可读性和可维护性

严格模式通常用于生产环境，配合打包工具将ES6+代码转换为ES5时使用。掌握这五个核心特点足以应对面试，无需深究所有细节，遵循二八原则高效学习。