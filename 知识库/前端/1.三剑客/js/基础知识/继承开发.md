# JavaScript ES6 Class ç»§æ‰¿ - å­¦ä¹ èµ„æ–™

[æ ‡ç­¾: ES6, Class, ç»§æ‰¿, é¢å‘å¯¹è±¡, super, extends]

## ğŸ“š æ—¥å¸¸å­¦ä¹ æ¨¡å¼

### ä¸€ã€æ ¸å¿ƒæ¦‚å¿µ

#### 1.1 Class åŸºç¡€
- **æœ¬è´¨**ï¼šES6è¯­æ³•ç³–ï¼Œåº•å±‚ä»æ˜¯åŸå‹é“¾ç»§æ‰¿çš„å°è£…
- **ä¼˜åŠ¿**ï¼šè¯­æ³•æ¸…æ™°ã€ç»“æ„åŒ–å¼ºã€æ›´æ¥è¿‘ä¼ ç»ŸOOP

#### 1.2 å…³é”®å­—è¯´æ˜

**class å…³é”®å­—**
```javascript
class ClassName {
  constructor(params) { /* åˆå§‹åŒ– */ }
  method() { /* å®ä¾‹æ–¹æ³• */ }
  static staticMethod() { /* é™æ€æ–¹æ³• */ }
}
```

**constructor æ„é€ å‡½æ•°**
- åˆ›å»ºå®ä¾‹æ—¶è‡ªåŠ¨æ‰§è¡Œ
- ç”¨äºåˆå§‹åŒ–å®ä¾‹å±æ€§ï¼ˆé€šè¿‡ `this`ï¼‰
- æ¯ä¸ªç±»åªèƒ½æœ‰ä¸€ä¸ª
- å­ç±»ä¸­å¿…é¡»å…ˆè°ƒç”¨ `super()` æ‰èƒ½ä½¿ç”¨ `this`

**extends ç»§æ‰¿**
```javascript
class Child extends Parent {
  constructor(params) {
    super(parentParams); // è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°
    this.childProp = value;
  }
}
```

**super å…³é”®å­—**
- åœ¨æ„é€ å‡½æ•°ä¸­ï¼š`super(args)` è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°
- åœ¨æ–¹æ³•ä¸­ï¼š`super.method()` è°ƒç”¨çˆ¶ç±»æ–¹æ³•
- **å¿…é¡»åœ¨è®¿é—® `this` ä¹‹å‰è°ƒç”¨**

---

### äºŒã€è¯­æ³•ç‰¹æ€§

#### 2.1 å®ä¾‹å±æ€§ä¸æ–¹æ³•
```javascript
class Person {
  constructor(name) {
    this.name = name; // å®ä¾‹å±æ€§
  }

  greet() { // å®ä¾‹æ–¹æ³•ï¼ˆåœ¨åŸå‹ä¸Šï¼‰
    return `Hello, ${this.name}`;
  }
}
```

#### 2.2 é™æ€æˆå‘˜
```javascript
class MathUtils {
  static PI = 3.14159;

  static calculate(x) {
    return x * this.PI;
  }
}

// è°ƒç”¨æ–¹å¼
MathUtils.calculate(2); // é€šè¿‡ç±»åè°ƒç”¨
// å®ä¾‹æ— æ³•è®¿é—®é™æ€æˆå‘˜
```

**ä½¿ç”¨åœºæ™¯**ï¼šå·¥å…·å‡½æ•°ã€é…ç½®å¸¸é‡ã€å·¥å‚æ–¹æ³•

#### 2.3 è®¿é—®å™¨å±æ€§
```javascript
class User {
  constructor(firstName, lastName) {
    this._firstName = firstName;
    this._lastName = lastName;
  }

  get fullName() {
    return `${this._firstName} ${this._lastName}`;
  }

  set fullName(value) {
    [this._firstName, this._lastName] = value.split(' ');
  }
}

const user = new User('John', 'Doe');
console.log(user.fullName); // "John Doe" - è°ƒç”¨ getter
user.fullName = 'Jane Smith'; // è°ƒç”¨ setter
```

**ä½¿ç”¨åœºæ™¯**ï¼šæ•°æ®éªŒè¯ã€è®¡ç®—å±æ€§ã€å±æ€§è®¿é—®æ§åˆ¶

#### 2.4 æ–¹æ³•é‡å†™
```javascript
class Animal {
  speak() {
    return 'Some sound';
  }
}

class Dog extends Animal {
  speak() {
    const parentSound = super.speak(); // å¯é€‰ï¼šè°ƒç”¨çˆ¶ç±»æ–¹æ³•
    return 'Woof!';
  }
}
```

---

### ä¸‰ã€ç»§æ‰¿æœºåˆ¶è¯¦è§£

#### 3.1 åŸå‹é“¾å…³ç³»
```javascript
class Parent {}
class Child extends Parent {}

// åŸå‹é“¾ç»“æ„ï¼š
// Child.prototype.__proto__ === Parent.prototype
// childå®ä¾‹ â†’ Child.prototype â†’ Parent.prototype â†’ Object.prototype
```

#### 3.2 å¤šå±‚ç»§æ‰¿
```javascript
class Entity {
  constructor(id) {
    this.id = id;
  }
}

class Person extends Entity {
  constructor(id, name) {
    super(id); // å¿…é¡»å…ˆè°ƒç”¨
    this.name = name;
  }
}

class Student extends Person {
  constructor(id, name, grade) {
    super(id, name);
    this.grade = grade;
  }
}
```

#### 3.3 instanceof æ£€æµ‹
```javascript
const student = new Student(1, 'Alice', 'A');
student instanceof Student; // true
student instanceof Person;  // true
student instanceof Entity;  // true
student instanceof Object;  // true
```

---

### å››ã€å®ç”¨ç¤ºä¾‹

#### 4.1 å®Œæ•´ç»§æ‰¿æ¡ˆä¾‹
```javascript
/**
 * åŸºç±»ï¼šäºº
 */
class People {
  constructor(name) {
    this.name = name;
  }

  eat() {
    console.log(`${this.name} is eating`);
  }

  static getSpecies() {
    return 'Homo sapiens';
  }
}

/**
 * å­ç±»ï¼šå­¦ç”Ÿ
 */
class Student extends People {
  constructor(name, studentId) {
    super(name);
    this.studentId = studentId;
  }

  // æ–¹æ³•é‡å†™
  eat() {
    super.eat(); // è°ƒç”¨çˆ¶ç±»æ–¹æ³•
    console.log('...in the cafeteria');
  }

  study() {
    console.log(`${this.name} is studying`);
  }
}

// ä½¿ç”¨ç¤ºä¾‹
const alice = new Student('Alice', 'S001');
alice.eat();   // "Alice is eating" + "...in the cafeteria"
alice.study(); // "Alice is studying"
```

#### 4.2 å®é™…åº”ç”¨åœºæ™¯

**ç»„ä»¶å¼€å‘ï¼ˆReacté£æ ¼ï¼‰**
```javascript
class Component {
  constructor(props) {
    this.props = props;
  }

  render() {
    throw new Error('Must implement render method');
  }
}

class Button extends Component {
  render() {
    return `<button>${this.props.text}</button>`;
  }
}
```

**æ•°æ®æ¨¡å‹**
```javascript
class Model {
  constructor(data) {
    this.data = data;
  }

  save() { /* ä¿å­˜é€»è¾‘ */ }
}

class User extends Model {
  constructor(data) {
    super(data);
    this.validate();
  }

  validate() {
    if (!this.data.email) throw new Error('Email required');
  }
}
```

---

### äº”ã€æœ€ä½³å®è·µ

#### 5.1 this ç»‘å®šé—®é¢˜
```javascript
class Counter {
  constructor() {
    this.count = 0;
    // æ–¹æ¡ˆ1ï¼šç®­å¤´å‡½æ•°ï¼ˆæ¨èï¼‰
    this.increment = () => {
      this.count++;
    };
  }

  // æ–¹æ¡ˆ2ï¼šåœ¨æ„é€ å‡½æ•°ä¸­ç»‘å®š
  // this.decrement = this.decrement.bind(this);

  decrement() {
    this.count--;
  }
}

const counter = new Counter();
const { increment } = counter;
increment(); // this ä¸ä¼šä¸¢å¤±
```

#### 5.2 é¿å…è¿‡åº¦ç»§æ‰¿
```javascript
// âŒ ä¸å¥½ï¼šç»§æ‰¿å±‚çº§è¿‡æ·±
class A {}
class B extends A {}
class C extends B {}
class D extends C {}

// âœ… å¥½ï¼šä½¿ç”¨ç»„åˆ
class Logger {
  log(msg) { console.log(msg); }
}

class User {
  constructor(name) {
    this.name = name;
    this.logger = new Logger(); // ç»„åˆ
  }
}
```

#### 5.3 ç§æœ‰å±æ€§ï¼ˆES2022+ï¼‰
```javascript
class BankAccount {
  #balance = 0; // ç§æœ‰å­—æ®µ

  deposit(amount) {
    this.#balance += amount;
  }

  getBalance() {
    return this.#balance;
  }
}

const account = new BankAccount();
account.#balance; // âŒ SyntaxError: Private field
```

---

### å…­ã€å¸¸è§é™·é˜±

1. **å¿˜è®°è°ƒç”¨ super()**
```javascript
class Child extends Parent {
  constructor() {
    this.prop = 1; // âŒ ReferenceError
    super(); // å¿…é¡»åœ¨æ­¤ä¹‹å‰
  }
}
```

2. **é™æ€æ–¹æ³•ä¸­çš„ this**
```javascript
class MyClass {
  static method() {
    console.log(this === MyClass); // true
    // this æŒ‡å‘ç±»æœ¬èº«,ä¸æ˜¯å®ä¾‹
  }
}
```

3. **ç®­å¤´å‡½æ•°ä¸é€‚åˆåšæ–¹æ³•**
```javascript
class Wrong {
  // âŒ æ¯ä¸ªå®ä¾‹éƒ½ä¼šåˆ›å»ºæ–°å‡½æ•°
  method = () => {};
}

class Right {
  // âœ… æ‰€æœ‰å®ä¾‹å…±äº«
  method() {}
}
```

---

## âš¡ é¢è¯•çªå‡»æ¨¡å¼

### 30ç§’ç”µæ¢¯æ¼”è®²
ES6 Classæ˜¯JavaScriptåŸºäºåŸå‹é“¾çš„è¯­æ³•ç³–,é€šè¿‡`class`å®šä¹‰ç±»ã€`extends`å®ç°ç»§æ‰¿ã€`super`è°ƒç”¨çˆ¶ç±»ã€‚æœ¬è´¨ä»æ˜¯åŸå‹é“¾,ä½†è¯­æ³•æ›´æ¸…æ™°ã€‚æ ¸å¿ƒè¦ç‚¹ï¼šå­ç±»æ„é€ å‡½æ•°å¿…é¡»å…ˆè°ƒç”¨`super()`åˆå§‹åŒ–çˆ¶ç±»å±æ€§,æ–¹æ³•å®šä¹‰åœ¨åŸå‹ä¸Šå®ç°å…±äº«,é™æ€æˆå‘˜å±äºç±»æœ¬èº«ä¸å±äºå®ä¾‹ã€‚

---

### é«˜é¢‘è€ƒç‚¹ï¼ˆå¿…èƒŒï¼‰

**è€ƒç‚¹1ï¼šsuper çš„ä¸¤ç§ç”¨æ³•**
- æ„é€ å‡½æ•°ä¸­ï¼š`super(args)` ä½œä¸ºå‡½æ•°è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°,å¿…é¡»åœ¨è®¿é—®`this`ä¹‹å‰æ‰§è¡Œ
- æ™®é€šæ–¹æ³•ä¸­ï¼š`super.method()` ä½œä¸ºå¯¹è±¡å¼•ç”¨çˆ¶ç±»æ–¹æ³•,ç”¨äºæ–¹æ³•é‡å†™æ—¶ä¿ç•™çˆ¶ç±»é€»è¾‘
- é™æ€æ–¹æ³•ä¸­ä¹Ÿå¯ç”¨`super`è°ƒç”¨çˆ¶ç±»é™æ€æ–¹æ³•

**è€ƒç‚¹2ï¼šClassç»§æ‰¿çš„åŸå‹é“¾æœºåˆ¶**
åº•å±‚é€šè¿‡`Object.create`è¿æ¥åŸå‹é“¾ï¼š`Child.prototype.__proto__ = Parent.prototype`,å­ç±»å®ä¾‹é€šè¿‡åŸå‹é“¾è®¿é—®çˆ¶ç±»æ–¹æ³•,`super()`é€šè¿‡`call/apply`æ”¹å˜thisæŒ‡å‘åˆ°å­ç±»å®ä¾‹,ä»è€Œåœ¨å­ç±»å®ä¾‹ä¸Šåˆå§‹åŒ–çˆ¶ç±»å±æ€§ã€‚

**è€ƒç‚¹3ï¼šé™æ€æˆå‘˜ç‰¹æ€§**
- é€šè¿‡`static`ä¿®é¥°,å±äºç±»æœ¬èº«ä¸å±äºå®ä¾‹
- åªèƒ½é€šè¿‡ç±»åè°ƒç”¨,ä¸èƒ½é€šè¿‡å®ä¾‹è®¿é—®
- ä¸èƒ½è®¿é—®å®ä¾‹çš„`this`,`this`æŒ‡å‘ç±»æœ¬èº«
- é€‚ç”¨åœºæ™¯ï¼šå·¥å…·å‡½æ•°ã€é…ç½®å¸¸é‡ã€å·¥å‚æ–¹æ³•

**è€ƒç‚¹4ï¼šthisç»‘å®šé—®é¢˜åŠè§£å†³æ–¹æ¡ˆ**
ç±»æ–¹æ³•ä½œä¸ºå›è°ƒä¼ é€’æ—¶ä¼šä¸¢å¤±thisæŒ‡å‘ã€‚è§£å†³æ–¹æ¡ˆï¼šâ‘ æ„é€ å‡½æ•°ä¸­ç”¨ç®­å¤´å‡½æ•°å®šä¹‰ â‘¡ä½¿ç”¨`bind`ç»‘å®š â‘¢è°ƒç”¨æ—¶ç”¨ç®­å¤´å‡½æ•°åŒ…è£…ã€‚Reactç»„ä»¶å¸¸è§æ­¤é—®é¢˜ã€‚

**è€ƒç‚¹5ï¼šæ–¹æ³•é‡å†™(Override)è§„åˆ™**
å­ç±»å®šä¹‰åŒåæ–¹æ³•è¦†ç›–çˆ¶ç±»,é€šè¿‡`super.method()`å¯åœ¨å­ç±»æ–¹æ³•ä¸­è°ƒç”¨çˆ¶ç±»åŸå§‹å®ç°,å®ç°åŠŸèƒ½æ‰©å±•è€Œéå®Œå…¨æ›¿æ¢ã€‚ä¸å¤šæ€æ¦‚å¿µç›¸å…³,åŒä¸€æ¥å£ä¸åŒå®ç°ã€‚

---

### ç»å…¸é¢è¯•é¢˜

**é¢˜ç›®1ï¼šä¸ºä»€ä¹ˆå­ç±»constructorå¿…é¡»å…ˆè°ƒç”¨super()?**

**æ€è·¯**ï¼šç†è§£ES6 Classç»§æ‰¿ä¸­thiså¯¹è±¡çš„åˆ›å»ºæ—¶æœº

**ç­”æ¡ˆ**ï¼š
ES6ç»§æ‰¿æœºåˆ¶ä¸­,å­ç±»çš„thiså¯¹è±¡ç”±çˆ¶ç±»æ„é€ å‡½æ•°åˆ›å»ºã€‚å¿…é¡»å…ˆè°ƒç”¨`super()`æ‰§è¡Œçˆ¶ç±»æ„é€ å‡½æ•°å®Œæˆthisåˆå§‹åŒ–,å­ç±»æ‰èƒ½è·å¾—thiså¯¹è±¡è¿›è¡Œåç»­æ“ä½œã€‚å¦‚æœåœ¨`super()`ä¹‹å‰è®¿é—®thisä¼šæŠ›å‡ºReferenceErrorã€‚è¿™ä¸ES5ç»§æ‰¿ä¸åŒ,ES5æ˜¯å…ˆåˆ›å»ºå­ç±»thiså†è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°æ·»åŠ å±æ€§ã€‚

**ä»£ç æ¡†æ¶**ï¼š
```javascript
/**
 * æ­£ç¡®ç¤ºä¾‹
 */
class Parent {
  constructor(name) {
    this.name = name;
  }
}

class Child extends Parent {
  constructor(name, age) {
    super(name);      // âœ… å¿…é¡»å…ˆè°ƒç”¨
    this.age = age;   // âœ… ä¹‹åæ‰èƒ½ä½¿ç”¨this
  }
}

/**
 * é”™è¯¯ç¤ºä¾‹
 */
class WrongChild extends Parent {
  constructor(name, age) {
    this.age = age;   // âŒ ReferenceError: Must call super
    super(name);
  }
}
```

---

**é¢˜ç›®2ï¼šè§£é‡Šinstanceofçš„æ£€æµ‹åŸç†åŠä¸ç»§æ‰¿çš„å…³ç³»**

**æ€è·¯**ï¼šåŸå‹é“¾éå†æœºåˆ¶

**ç­”æ¡ˆ**ï¼š
`instanceof`é€šè¿‡æ£€æŸ¥å³ä¾§æ„é€ å‡½æ•°çš„`prototype`æ˜¯å¦å‡ºç°åœ¨å·¦ä¾§å¯¹è±¡çš„åŸå‹é“¾ä¸Šæ¥åˆ¤æ–­ã€‚ç”±äºES6ç»§æ‰¿å»ºç«‹äº†å®Œæ•´åŸå‹é“¾,å­ç±»å®ä¾‹çš„`__proto__`é“¾ä¼šä¾æ¬¡æŒ‡å‘`Child.prototype` â†’ `Parent.prototype` â†’ `Object.prototype`,å› æ­¤å­ç±»å®ä¾‹æ—¢æ˜¯å­ç±»çš„å®ä¾‹ä¹Ÿæ˜¯æ‰€æœ‰çˆ¶ç±»çš„å®ä¾‹ã€‚

**ä»£ç æ¡†æ¶**ï¼š
```javascript
/**
 * instanceof æ£€æµ‹ç¤ºä¾‹
 * @description å±•ç¤ºåŸå‹é“¾å…³ç³»
 */
class Grandparent {}
class Parent extends Grandparent {}
class Child extends Parent {}

const instance = new Child();

console.log(instance instanceof Child);        // true
console.log(instance instanceof Parent);       // true
console.log(instance instanceof Grandparent);  // true
console.log(instance instanceof Object);       // true

// åŸå‹é“¾ç»“æ„
console.log(Object.getPrototypeOf(instance) === Child.prototype);
console.log(Object.getPrototypeOf(Child.prototype) === Parent.prototype);
console.log(Object.getPrototypeOf(Parent.prototype) === Grandparent.prototype);
```

---

**é¢˜ç›®3ï¼šClassç»§æ‰¿ä¸å¯„ç”Ÿç»„åˆç»§æ‰¿çš„å¼‚åŒ**

**æ€è·¯**ï¼šES6è¯­æ³•ç³–æœ¬è´¨ä¸ES5ç»§æ‰¿å¯¹æ¯”

**ç­”æ¡ˆ**ï¼š
ç›¸åŒç‚¹ï¼šåº•å±‚éƒ½åŸºäºåŸå‹é“¾,éƒ½è§£å†³äº†æ„é€ å‡½æ•°ç»§æ‰¿å’ŒåŸå‹é“¾ç»§æ‰¿çš„é—®é¢˜ã€‚ä¸åŒç‚¹ï¼šâ‘ è¯­æ³•å±‚é¢Classæ›´ç®€æ´å£°æ˜å¼,å¯„ç”Ÿç»„åˆéœ€æ‰‹åŠ¨æ“ä½œåŸå‹ â‘¡Classé€šè¿‡`super`è‡ªåŠ¨å¤„ç†thisç»‘å®š,å¯„ç”Ÿç»„åˆéœ€æ‰‹åŠ¨`call` â‘¢Classæœ‰ä¸¥æ ¼æ¨¡å¼ã€ä¸å¯æšä¸¾çš„æ–¹æ³•ç­‰ç‰¹æ€§ â‘£Classçš„`constructor`ä¸å¯çœç•¥`new`è°ƒç”¨ã€‚

**ä»£ç æ¡†æ¶**ï¼š
```javascript
/**
 * ES5 å¯„ç”Ÿç»„åˆç»§æ‰¿
 */
function Parent(name) {
  this.name = name;
}
Parent.prototype.sayHi = function() {
  console.log(this.name);
};

function Child(name, age) {
  Parent.call(this, name);  // ç»§æ‰¿å±æ€§
  this.age = age;
}
Child.prototype = Object.create(Parent.prototype);  // ç»§æ‰¿æ–¹æ³•
Child.prototype.constructor = Child;

/**
 * ES6 Class ç»§æ‰¿ï¼ˆç­‰ä»·å®ç°ï¼‰
 */
class ParentClass {
  constructor(name) {
    this.name = name;
  }
  sayHi() {
    console.log(this.name);
  }
}

class ChildClass extends ParentClass {
  constructor(name, age) {
    super(name);
    this.age = age;
  }
}
```

---

**é¢˜ç›®4ï¼šå¦‚ä½•å®ç°ç§æœ‰å±æ€§å’Œæ–¹æ³•?**

**æ€è·¯**ï¼šå¤šç§å®ç°æ–¹æ¡ˆåŠå…¶ä¼˜ç¼ºç‚¹

**ç­”æ¡ˆ**ï¼š
â‘ ES2022+ç§æœ‰å­—æ®µ`#field`ï¼ˆæœ€ä½³,åŸç”Ÿæ”¯æŒçœŸæ­£ç§æœ‰ï¼‰â‘¡WeakMapå­˜å‚¨ï¼ˆå…¼å®¹æ€§å¥½,éœ€æ‰‹åŠ¨ç®¡ç†ï¼‰â‘¢é—­åŒ…+Symbolï¼ˆè¾ƒå¤æ‚ï¼‰â‘£å‘½åçº¦å®š`_field`ï¼ˆæ— å¼ºåˆ¶æ€§ä»…é è§„èŒƒï¼‰ã€‚ç”Ÿäº§ç¯å¢ƒä¼˜å…ˆç”¨`#`è¯­æ³•é…åˆbabelè½¬è¯‘ã€‚

**ä»£ç æ¡†æ¶**ï¼š
```javascript
/**
 * æ–¹æ¡ˆ1: ES2022 ç§æœ‰å­—æ®µï¼ˆæ¨èï¼‰
 */
class Modern {
  #privateField = 0;  // ç§æœ‰å±æ€§

  #privateMethod() {  // ç§æœ‰æ–¹æ³•
    return this.#privateField;
  }

  publicMethod() {
    return this.#privateMethod();
  }
}

/**
 * æ–¹æ¡ˆ2: WeakMapï¼ˆå…¼å®¹æ€§æ–¹æ¡ˆï¼‰
 */
const privateData = new WeakMap();

class Compatible {
  constructor() {
    privateData.set(this, { secret: 'hidden' });
  }

  getSecret() {
    return privateData.get(this).secret;
  }
}

/**
 * æ–¹æ¡ˆ3: å‘½åçº¦å®šï¼ˆæœ€ç®€å•ä½†ä¸å¼ºåˆ¶ï¼‰
 */
class Convention {
  constructor() {
    this._private = 'by convention';  // çº¦å®šç§æœ‰
  }
}
```

---

**é¢˜ç›®5ï¼šé™æ€æ–¹æ³•èƒ½è¢«ç»§æ‰¿å—?å¦‚ä½•è°ƒç”¨?**

**æ€è·¯**ï¼šé™æ€æˆå‘˜çš„ç»§æ‰¿æœºåˆ¶

**ç­”æ¡ˆ**ï¼š
èƒ½è¢«ç»§æ‰¿ã€‚å­ç±»å¯ä»¥é€šè¿‡ç±»åè°ƒç”¨çˆ¶ç±»é™æ€æ–¹æ³•,ä¹Ÿä¼šç»§æ‰¿åˆ°è‡ªèº«çš„é™æ€æ–¹æ³•ã€‚ä½†å®ä¾‹æ— æ³•è®¿é—®ä»»ä½•é™æ€æˆå‘˜ã€‚åŸç†ï¼š`Child.__proto__ === Parent`,æ‰€ä»¥å­ç±»èƒ½è®¿é—®çˆ¶ç±»é™æ€æˆå‘˜ã€‚

**ä»£ç æ¡†æ¶**ï¼š
```javascript
/**
 * é™æ€æ–¹æ³•ç»§æ‰¿ç¤ºä¾‹
 */
class Parent {
  static parentStatic() {
    return 'Parent static';
  }
}

class Child extends Parent {
  static childStatic() {
    return 'Child static';
  }
}

// âœ… æ­£ç¡®è°ƒç”¨æ–¹å¼
console.log(Parent.parentStatic());      // "Parent static"
console.log(Child.parentStatic());       // "Parent static" - ç»§æ‰¿
console.log(Child.childStatic());        // "Child static"

// âŒ é”™è¯¯è°ƒç”¨æ–¹å¼
const child = new Child();
console.log(child.parentStatic());       // undefined - å®ä¾‹æ— æ³•è®¿é—®

// å­ç±»é™æ€æ–¹æ³•ä¸­è°ƒç”¨çˆ¶ç±»é™æ€æ–¹æ³•
class Enhanced extends Parent {
  static callParent() {
    return super.parentStatic();  // âœ… ä½¿ç”¨superè°ƒç”¨
  }
}
```

---

**é¢˜ç›®6ï¼šæ–¹æ³•å®šä¹‰åœ¨constructorå†…å’Œå¤–æœ‰ä½•åŒºåˆ«?**

**æ€è·¯**ï¼šå®ä¾‹æ–¹æ³•vsåŸå‹æ–¹æ³•çš„å†…å­˜å·®å¼‚

**ç­”æ¡ˆ**ï¼š
constructorå†…å®šä¹‰çš„æ–¹æ³•æ˜¯å®ä¾‹æ–¹æ³•,æ¯ä¸ªå®ä¾‹éƒ½ä¼šåˆ›å»ºä¸€ä»½,å ç”¨æ›´å¤šå†…å­˜ä½†å¯è®¿é—®é—­åŒ…å˜é‡ã€‚classä½“å†…å®šä¹‰çš„æ–¹æ³•åœ¨åŸå‹ä¸Š,æ‰€æœ‰å®ä¾‹å…±äº«åŒä¸€ä¸ªå‡½æ•°å¯¹è±¡,èŠ‚çœå†…å­˜æ˜¯æ ‡å‡†åšæ³•ã€‚ç®­å¤´å‡½æ•°é€šå¸¸åœ¨constructorå†…å®šä¹‰ä»¥ç»‘å®šthisã€‚

**ä»£ç æ¡†æ¶**ï¼š
```javascript
/**
 * å¯¹æ¯”ç¤ºä¾‹
 */
class Example {
  constructor(name) {
    this.name = name;
  
    // âŒ å®ä¾‹æ–¹æ³• - æ¯ä¸ªå®ä¾‹ç‹¬ç«‹åˆ›å»º
    this.instanceMethod = function() {
      return this.name;
    };
  
    // âœ… ç®­å¤´å‡½æ•°å®ä¾‹æ–¹æ³• - è‡ªåŠ¨ç»‘å®šthis
    this.boundMethod = () => {
      return this.name;
    };
  }

  // âœ… åŸå‹æ–¹æ³• - æ‰€æœ‰å®ä¾‹å…±äº«ï¼ˆæ¨èï¼‰
  prototypeMethod() {
    return this.name;
  }
}

const obj1 = new Example('A');
const obj2 = new Example('B');

// éªŒè¯å†…å­˜å ç”¨
console.log(obj1.instanceMethod === obj2.instanceMethod);    // false - ä¸åŒå¯¹è±¡
console.log(obj1.prototypeMethod === obj2.prototypeMethod);  // true - å…±äº«
```

---

**é¢˜ç›®7ï¼šå¦‚ä½•åœ¨å­ç±»ä¸­è°ƒç”¨çˆ¶ç±»çš„åŒåæ–¹æ³•?**

**æ€è·¯**ï¼šsuperåœ¨æ–¹æ³•é‡å†™ä¸­çš„åº”ç”¨

**ç­”æ¡ˆ**ï¼š
ä½¿ç”¨`super.methodName()`è°ƒç”¨çˆ¶ç±»è¢«é‡å†™çš„æ–¹æ³•ã€‚è¿™å…è®¸åœ¨ä¿ç•™çˆ¶ç±»é€»è¾‘çš„åŸºç¡€ä¸Šæ‰©å±•åŠŸèƒ½ã€‚æ³¨æ„superåªèƒ½åœ¨ç±»æ–¹æ³•ä¸­ä½¿ç”¨,ä¸èƒ½åœ¨ç®­å¤´å‡½æ•°æˆ–æ™®é€šå‡½æ•°ä¸­ä½¿ç”¨ã€‚

**ä»£ç æ¡†æ¶**ï¼š
```javascript
/**
 * æ–¹æ³•é‡å†™ä¸superè°ƒç”¨
 */
class Animal {
  speak() {
    return 'Animal speaks';
  }

  move() {
    return 'Moving';
  }
}

class Dog extends Animal {
  // å®Œå…¨é‡å†™
  speak() {
    return 'Woof!';
  }

  // æ‰©å±•çˆ¶ç±»æ–¹æ³•
  move() {
    const parentMove = super.move();  // è°ƒç”¨çˆ¶ç±»æ–¹æ³•
    return `${parentMove} by running`;
  }

  // âŒ é”™è¯¯ï¼šç®­å¤´å‡½æ•°ä¸­ä¸èƒ½ä½¿ç”¨super
  // wrongMethod = () => {
  //   super.speak();  // SyntaxError
  // }
}

const dog = new Dog();
console.log(dog.speak());  // "Woof!"
console.log(dog.move());   // "Moving by running"
```

---

**é¢˜ç›®8ï¼šClassä¸­å¦‚ä½•å®ç°Getter/Setter?åº”ç”¨åœºæ™¯?**

**æ€è·¯**ï¼šè®¿é—®å™¨å±æ€§çš„å®šä¹‰ä¸ä½¿ç”¨

**ç­”æ¡ˆ**ï¼š
ä½¿ç”¨`get`/`set`å…³é”®å­—å®šä¹‰è®¿é—®å™¨å±æ€§,è°ƒç”¨æ—¶åƒæ™®é€šå±æ€§ä¸€æ ·è®¿é—®ã€‚åº”ç”¨åœºæ™¯ï¼šâ‘ æ•°æ®éªŒè¯ â‘¡è®¡ç®—å±æ€§ â‘¢å±æ€§è®¿é—®æ§åˆ¶ â‘£æƒ°æ€§åŠ è½½ã€‚æ³¨æ„setterå¿…é¡»æ°å¥½æ¥å—ä¸€ä¸ªå‚æ•°,getterä¸æ¥å—å‚æ•°ã€‚

**ä»£ç æ¡†æ¶**ï¼š
```javascript
/**
 * Getter/Setter å®Œæ•´ç¤ºä¾‹
 */
class User {
  constructor(firstName, lastName) {
    this._firstName = firstName;
    this._lastName = lastName;
    this._age = 0;
  }

  // è®¡ç®—å±æ€§
  get fullName() {
    return `${this._firstName} ${this._lastName}`;
  }

  set fullName(value) {
    const parts = value.split(' ');
    if (parts.length !== 2) {
      throw new Error('Invalid name format');
    }
    [this._firstName, this._lastName] = parts;
  }

  // æ•°æ®éªŒè¯
  get age() {
    return this._age;
  }

  set age(value) {
    if (typeof value !== 'number' || value < 0 || value > 150) {
      throw new Error('Invalid age');
    }
    this._age = value;
  }

  // åªè¯»å±æ€§ï¼ˆåªæœ‰getterï¼‰
  get isAdult() {
    return this._age >= 18;
  }
}

// ä½¿ç”¨ç¤ºä¾‹
const user = new User('John', 'Doe');
console.log(user.fullName);      // "John Doe" - è°ƒç”¨getter
user.fullName = 'Jane Smith';    // è°ƒç”¨setter
user.age = 25;                   // éªŒè¯é€šè¿‡
console.log(user.isAdult);       // true
```

---

**é¢˜ç›®9ï¼šå¤šå±‚ç»§æ‰¿æ—¶å¦‚ä½•æ­£ç¡®ä¼ é€’å‚æ•°?**

**æ€è·¯**ï¼šsuperè°ƒç”¨é“¾çš„å‚æ•°ä¼ é€’

**ç­”æ¡ˆ**ï¼š
æ¯ä¸€å±‚å­ç±»çš„constructoréƒ½å¿…é¡»è°ƒç”¨`super()`å¹¶ä¼ é€’çˆ¶ç±»æ‰€éœ€å‚æ•°,å½¢æˆè°ƒç”¨é“¾ã€‚å‚æ•°ä»æœ€åº•å±‚å­ç±»é€å±‚å‘ä¸Šä¼ é€’åˆ°é¡¶å±‚çˆ¶ç±»ã€‚æ³¨æ„æ¯å±‚åªä¼ é€’ç›´æ¥çˆ¶ç±»éœ€è¦çš„å‚æ•°,ä¸è¦è·¨å±‚ä¼ é€’ã€‚

**ä»£ç æ¡†æ¶**ï¼š
```javascript
/**
 * ä¸‰å±‚ç»§æ‰¿å‚æ•°ä¼ é€’
 */
class Entity {
  constructor(id) {
    this.id = id;
    console.log('Entity initialized');
  }
}

class Person extends Entity {
  constructor(id, name, age) {
    super(id);  // ä¼ é€’ç»™Entity
    this.name = name;
    this.age = age;
    console.log('Person initialized');
  }
}

class Student extends Person {
  constructor(id, name, age, grade, major) {
    super(id, name, age);  // ä¼ é€’ç»™Person
    this.grade = grade;
    this.major = major;
    console.log('Student initialized');
  }

  getInfo() {
    return `ID: ${this.id}, Name: ${this.name}, Age: ${this.age}, Grade: ${this.grade}, Major: ${this.major}`;
  }
}

// åˆ›å»ºå®ä¾‹
const student = new Student('S001', 'Alice', 20, 'A', 'CS');
// è¾“å‡ºé¡ºåºï¼š
// Entity initialized
// Person initialized
// Student initialized

console.log(student.getInfo());
```

---

**é¢˜ç›®10ï¼šå¦‚ä½•åˆ¤æ–­ä¸€ä¸ªæ–¹æ³•æ˜¯å®ä¾‹æ–¹æ³•è¿˜æ˜¯é™æ€æ–¹æ³•?**

**æ€è·¯**ï¼šæ–¹æ³•å­˜å‚¨ä½ç½®çš„å·®å¼‚

**ç­”æ¡ˆ**ï¼š
â‘ çœ‹å®šä¹‰ï¼šæœ‰`static`å…³é”®å­—æ˜¯é™æ€æ–¹æ³• â‘¡çœ‹è°ƒç”¨ï¼šé€šè¿‡ç±»åè°ƒç”¨æ˜¯é™æ€æ–¹æ³•,é€šè¿‡å®ä¾‹è°ƒç”¨æ˜¯å®ä¾‹æ–¹æ³• â‘¢çœ‹å­˜å‚¨ï¼š`ClassName.hasOwnProperty('method')`ä¸ºtrueæ˜¯é™æ€æ–¹æ³•,åœ¨åŸå‹é“¾ä¸Šæ˜¯å®ä¾‹æ–¹æ³•ã€‚è¿è¡Œæ—¶å¯é€šè¿‡æ£€æŸ¥æ–¹æ³•æ˜¯å¦åœ¨å®ä¾‹çš„åŸå‹é“¾ä¸Šåˆ¤æ–­ã€‚

**ä»£ç æ¡†æ¶**ï¼š
```javascript
/**
 * è¯†åˆ«æ–¹æ³•ç±»å‹
 */
class MyClass {
  // é™æ€æ–¹æ³•
  static staticMethod() {
    return 'Static';
  }

  // å®ä¾‹æ–¹æ³•
  instanceMethod() {
    return 'Instance';
  }
}

const instance = new MyClass();

// æ–¹æ³•1: æ£€æŸ¥å®šä¹‰ä½ç½®
console.log(MyClass.hasOwnProperty('staticMethod'));        // true
console.log(MyClass.prototype.hasOwnProperty('instanceMethod'));  // true

// æ–¹æ³•2: æ£€æŸ¥å¯è®¿é—®æ€§
console.log(typeof MyClass.staticMethod);         // "function"
console.log(typeof instance.staticMethod);        // "undefined"
console.log(typeof instance.instanceMethod);      // "function"

// æ–¹æ³•3: æ£€æŸ¥åŸå‹é“¾
console.log('instanceMethod' in instance);                    // true
console.log(instance.hasOwnProperty('instanceMethod'));       // false
console.log(MyClass.prototype.hasOwnProperty('instanceMethod')); // true

// åˆ¤æ–­å‡½æ•°
function isStaticMethod(ClassRef, methodName) {
  return ClassRef.hasOwnProperty(methodName);
}

function isInstanceMethod(ClassRef, methodName) {
  return ClassRef.prototype.hasOwnProperty(methodName);
}
```

---

**ğŸ¯ å¿«é€Ÿè®°å¿†å£è¯€**

- **ç»§æ‰¿ä¸‰è¦ç´ **ï¼šclasså®šä¹‰ã€extendsç»§æ‰¿ã€superè°ƒç”¨
- **superåŒé‡æ€§**ï¼šæ„é€ å½“å‡½æ•°ã€æ–¹æ³•å½“å¯¹è±¡
- **thisä¸‰è§„åˆ™**ï¼šsuperå…ˆè¡Œã€ç®­å¤´ç»‘å®šã€bindå¤‡ç”¨
- **æ–¹æ³•ä¸¤ä½ç½®**ï¼šåŸå‹å…±äº«çœã€å®ä¾‹ç‹¬ç«‹è´¹
- **é™æ€ä¸‰ç‰¹ç‚¹**ï¼šç±»åè°ƒã€ä¸è®¿å®ä¾‹ã€å·¥å…·åœºæ™¯

[æ ‡ç­¾: ES6, Class, ç»§æ‰¿, super, é¢è¯•, JavaScripté¢å‘å¯¹è±¡]