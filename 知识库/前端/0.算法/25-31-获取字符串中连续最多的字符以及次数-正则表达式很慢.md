# 获取字符串中连续最多的字符以及次数 - 正则表达式很慢

## 目录
- [不推荐的解决方案](#不推荐的解决方案)
- [正则表达式的性能问题](#正则表达式的性能问题)
- [累积元素连续长度的方案](#累积元素连续长度的方案)
- [算法题的核心原则](#算法题的核心原则)
- [性能测试对比](#性能测试对比)
- [AI 总结](#ai-总结)

## 不推荐的解决方案

虽然题目的核心解法已经讲完,但需要强调网上流传的三种方式是不推荐的:

1\. **正则表达式方式**
2\. **累积各个元素的连续长度,最后求最大值**
3\. **使用高级 API 和语法糖**

这些方案在工作中可以使用,但在面试算法题中不推荐,因为:
- 工作是工作,面试是面试
- 算法题追求的是复杂度优化
- 这些方案无法体现算法思维和算法素养

## 正则表达式的性能问题

正则表达式的效率非常非常低:
- 背后的运算逻辑非常复杂
- 远不像循环和简单判断那么快速
- 类似于一个小编译器的运算机制
- 在算法题中追求复杂度时,效率非常低

**工作 vs 面试的区别:**
- 工作中可以使用正则表达式,因为不会有那么大的数据体量
- 面试算法题中不推荐,因为考察的是性能和算法思维

## 累积元素连续长度的方案

**实现思路:**

以字符串 `AABBBBCCDDAE` 为例:
- 遍历每一个字符
- 使用 Map 或对象记录每个字符的出现次数:
  - A: 3个
  - B: 4个
  - C: 2个
  - D: 2个
  - E: 1个
- 最后遍历找出最大值,取出 B

**问题分析:**

逻辑非常简单,工作中可能还比较推荐,但在面试中存在问题:

1\. **无法体现算法思维**
   - 看不出算法素养
   - 绕弯路的解决方式

2\. **图增了空间复杂度**
   - 空间复杂度是 O(n) 级别
   - 有多少个输入就需要多少个空间
   - 而之前的解法空间复杂度只有 O(1)
   - 只需要存储 `temp` 变量,与字符串长度无关
   - 即使字符串有 100 万长度,存储空间也只是一个 `temp`

3\. **没有改善时间复杂度**
   - 时间复杂度仍然是 O(n),需要遍历一遍数组
   - 在没有改变时间复杂度的前提下,图增了空间复杂度
   - 这是一个看似巧妙但实际上笨拙的做法

**结论:** 强烈不推荐这种方案

## 算法题的核心原则

### 慎用高级语法和 API

算法题经常用低级调用,使用最原始的判断和循环:
- 才能自己判断出时间复杂度
- 知道运算次数
- 不要用语法糖等看似简洁的东西
- 看似简洁的不一定真的简洁

### 关键概念

1\. **实际复杂度**
   - 不要被代码表面所迷惑
   - 例如:嵌套循环里面的跳步,实际上不是 O(n²),而是 O(n)

2\. **双指针**
   - 常用于解决嵌套循环问题
   - 所有遇到嵌套循环的问题都可以通过双指针方式尝试解决

3\. **使用场景区分**
   - 算法题慎用正则表达式
   - 日常工作可以用,因为没有很大的输入量
   - 算法题考的就是算法,考的就是性能

## 性能测试对比

### 测试代码

**正则表达式方式:**
```javascript
// 测试字符串
const str = "100ABC";
const reg = /^\d+/; // 匹配前面的数字

// 执行 100 万次
for (let i = 0; i < 1000000; i++) {
  reg.test(str);
}
```

**indexOf 方式:**
```javascript
const str = "100ABC";

// 执行 100 万次
for (let i = 0; i < 1000000; i++) {
  str.indexOf("100");
}
```

### 测试结果

- 正则表达式方式: **32 毫秒**
- indexOf 方式: **2 毫秒**

**说明:**
- indexOf 虽然也需要对字符串前面进行匹配,也并不是很快
- 但比正则表达式要快很多
- 如果字符串更加复杂,差距会更加明显

### 关于正则表达式的误区

很多人在网上被点赞的方案:
- "你看正则表达式多简单啊,多简洁,两行代码搞定"
- 这是最简易的方式,但忽略了性能

**重要提醒:**
- 任何东西都需要独立思考
- 任何看不透的东西都需要转换成第一代码
- 将自己看透正则表达式背后的逻辑
- 正则表达式背后的解析方法需要在编译原理中才会学到
- 实际复杂度很高

## AI 总结

本视频主要讲解了在解决"获取字符串中连续最多的字符"这一算法题时,不推荐使用的三种方案及其原因:

**核心观点:**
1. 正则表达式虽然代码简洁,但性能极低,背后运算机制复杂,不适合算法题
2. 使用 Map/对象累积字符次数的方案会图增空间复杂度至 O(n),而优秀方案只需 O(1)
3. 算法题应使用原始的循环和判断,避免高级 API 和语法糖,才能体现算法思维

**关键原则:**
- 工作中可以使用简洁方案,但面试算法题要追求时间和空间复杂度的最优解
- 不要被代码表面的简洁所迷惑,要理解背后的实际复杂度
- 双指针是解决嵌套循环问题的常用技巧

通过性能测试对比(正则 32ms vs indexOf 2ms),直观展示了正则表达式的性能劣势。