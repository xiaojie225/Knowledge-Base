/**
 * VitePress 配置文件
 * 
 * 这个文件定义了整个网站的核心配置，包括：
 * - 站点基本信息（标题、描述等）
 * - 导航栏配置
 * - 侧边栏配置（支持多层嵌套）
 * - 搜索功能配置
 * - 主题样式配置
 * 
 * 文档：https://vitepress.dev/reference/site-config
 */

import { defineConfig } from 'vitepress'

/**
 * 导出默认配置
 * defineConfig 函数提供 TypeScript 类型支持和智能提示
 */
export default defineConfig({
  /**
   * ============================================
   * 站点元数据
   * ============================================
   */
  
  /**
   * 网站标题
   * 显示在浏览器标签页、导航栏等位置
   */
  title: "my-notes",
  
  /**
   * 网站描述
   * 用于 SEO 优化和搜索引擎展示
   */
  description: "平时自己学习的日记月累，自己积累的技术",
  
  /**
   * 网站语言设置
   */
  lang: 'zh-CN',
  
  /**
   * 部署基础路径
   * 
   * ⚠️ 重要修改：
   * 根据您的 GitHub 仓库名称 Knowledge-Base
   * 访问地址是：https://xiaojie225.github.io/Knowledge-Base/
   * 所以 base 必须设置为 '/Knowledge-Base/' 
   */
  base: '/Knowledge-Base/',
  
  /**
   * 生成简洁 URL（移除 .html 后缀）
   */
  cleanUrls: true,
  
  /**
   * 启用最后更新时间
   * 基于 Git 提交记录显示页面更新时间
   */
  lastUpdated: true,
  
  /**
   * Head 标签配置
   * 用于添加网站图标、SEO 标签等
   */
  head: [
    ['link', { rel: 'icon', href: '/Knowledge-Base/favicon.ico' }],
    ['meta', { name: 'theme-color', content: '#3eaf7c' }],
    ['meta', { name: 'viewport', content: 'width=device-width, initial-scale=1.0' }]
  ],
  
  /**
   * ============================================
   * 主题配置
   * ============================================
   */
  themeConfig: {
    /**
     * 网站 Logo（可选）
     * 如果需要 Logo，在 public/ 目录放置图片文件
     */
    // logo: '/logo.png',
    
    /**
     * ========================================
     * 顶部导航栏配置
     * ========================================
     * 
     * 导航栏显示在页面顶部，用于快速访问主要分类
     */
    nav: [
      /**
       * 首页链接
       */
      {
        text: '首页',
        link: '/'
      },
      
      {
        text: '前端',
        link: '/知识库/前端/index'
      }
    ],

    /**
     * ========================================
     * 侧边栏配置 - 支持多层嵌套
     * ========================================
     * 
     * 侧边栏根据当前访问的路径自动显示对应的导航结构
     * 配置格式：'/路径/': [ 侧边栏项数组 ]
     * 
     * 嵌套结构说明：
     * 1. 第一层：大分类（如"算法与数据结构"）
     * 2. 第二层：子分类（如"数据结构"、"LeetCode"）
     * 3. 第三层：具体文章（如"数组.md"、"链表.md"）
     * 
     * collapsed 属性：
     * - true：默认折叠
     * - false：默认展开
     */
    sidebar: {
      /**
       * ========================================
       * 算法分类侧边栏 - 嵌套结构示例
       * ========================================
       * 
       * 文件结构：
       * 0.算法/
       * ├── index.md                    # 概览页
       * ├── 数据结构/                    # 子目录
       * │   ├── 数组.md
       * │   ├── 链表.md
       * │   └── 树.md
       * └── LeetCode/                   # 子目录
       *     ├── 简单题.md
       *     └── 中等题.md
       */
      '/知识库/前端/': [
        {
          text: '前端知识库',
          collapsed: true,
          items: [
            {
              text: '概览',
              link: '/知识库/前端/index'
            },
            {
              text: 'API接口网站',
              link: '/知识库/前端/API接口网站'
            },
            {
              text: '0. 算法',
              collapsed: true,
              items: [
                { text: '时间复杂度', link: '/知识库/前端/0.算法/25-2-科普-时间复杂度' },
                { text: '空间复杂度', link: '/知识库/前端/0.算法/25-3-科普-空间复杂度' },
                { text: '数组旋转k步-代码演示', link: '/知识库/前端/0.算法/25-4-把一个数组旋转k步-代码演示和单元测试' },
                { text: '数组旋转k步-性能分析', link: '/知识库/前端/0.算法/25-5-把一个数组旋转k步-性能分析' },
                { text: '括号匹配', link: '/知识库/前端/0.算法/25-6-判断一个字符串是否括号匹配' },
                { text: '两个栈实现队列', link: '/知识库/前端/0.算法/25-7-用两个栈实现一个队列' },
                { text: '反转单向链表-概念', link: '/知识库/前端/0.算法/25-8-使用JS反转单向链表-什么是链表' },
                { text: '反转单向链表-思路', link: '/知识库/前端/0.算法/25-9-使用JS反转单向链表-分析解题思路' },
                { text: '反转单向链表-代码', link: '/知识库/前端/0.算法/25-10-使用JS反转单向链表-代码演示和单元测试' },
                { text: '链表vs数组实现队列-思路', link: '/知识库/前端/0.算法/25-11-【连环问】链表和数组哪个实现队列更快-分析解题思路' },
                { text: '链表vs数组实现队列-代码', link: '/知识库/前端/0.算法/25-12-【连环问】链表和数组哪个实现队列更快-代码演示和单元' },
                { text: '链表vs数组实现队列-性能', link: '/知识库/前端/0.算法/25-13-【连环问】链表和数组哪个实现队列更快-性能分析' },
                { text: '二分查找-复杂度', link: '/知识库/前端/0.算法/25-14-用JS实现二分查找-分析时间复杂度' },
                { text: '二分查找-代码', link: '/知识库/前端/0.算法/25-15-用JS实现二分查找-代码演示和单元测试' },
                { text: '二分查找-递归vs循环', link: '/知识库/前端/0.算法/25-16-用JS实现二分查找-递归和循环哪个更好' },
                { text: '数组和为n-嵌套循环', link: '/知识库/前端/0.算法/25-17-找出一个数组中和为n的两个数-嵌套循环不是最优解' },
                { text: '数组和为n-双指针思路', link: '/知识库/前端/0.算法/25-18-找出一个数组中和为n的两个数-双指针的思路' },
                { text: '数组和为n-双指针代码', link: '/知识库/前端/0.算法/25-19-找出一个数组中和为n的两个数-双指针的代码演示' },
                { text: '二叉树遍历', link: '/知识库/前端/0.算法/25-20-求二叉搜索树的第K小值-二叉树和三种遍历' },
                { text: '二叉搜索树第K小值', link: '/知识库/前端/0.算法/25-21-求二叉搜索树的第K小值-解题' },
                { text: '二叉树的重要性', link: '/知识库/前端/0.算法/25-22-为什么二叉树很重要，而不是三叉树四岔树' },
                { text: '堆的特点', link: '/知识库/前端/0.算法/25-23-堆有什么特点，和二叉树有什么关系' },
                { text: '斐波那契-递归问题', link: '/知识库/前端/0.算法/25-24-求斐波那契数列的第n值-递归算法会导致运行崩溃' },
                { text: '斐波那契-优化', link: '/知识库/前端/0.算法/25-25-求斐波那契数列的第n值-优化时间复杂度' },
                { text: '青蛙跳台阶', link: '/知识库/前端/0.算法/25-26-【连环问】青蛙跳台阶有几种方式' },
                { text: '移动0-splice问题', link: '/知识库/前端/0.算法/25-27-移动0到数组的末尾-splice会导致性能问题' },
                { text: '移动0-双指针', link: '/知识库/前端/0.算法/25-28-移动0到数组的末尾-使用双指针' },
                { text: '连续字符-嵌套循环', link: '/知识库/前端/0.算法/25-29-获取字符串中连续最多的字符以及次数-使用嵌套循环' },
                { text: '连续字符-双指针', link: '/知识库/前端/0.算法/25-30-获取字符串中连续最多的字符以及次数-使用双指针（00' },
                { text: '连续字符-正则表达式', link: '/知识库/前端/0.算法/25-31-获取字符串中连续最多的字符以及次数-正则表达式很慢' },
                { text: '快速排序-代码', link: '/知识库/前端/0.算法/25-32-用JS实现快速排序并说明时间复杂度-代码演示和单元测' },
                { text: '快速排序-性能', link: '/知识库/前端/0.算法/25-33-用JS实现快速排序并说明时间复杂度-性能分析' },
                { text: '对称数-代码', link: '/知识库/前端/0.算法/25-34-获取1-10000之前所有的对称数（回文数）-代码演' },
                { text: '对称数-性能', link: '/知识库/前端/0.算法/25-35-获取1-10000之前所有的对称数（回文数）-性能分' },
                { text: '单词前缀匹配', link: '/知识库/前端/0.算法/25-36-如何实现高效的英文单词前缀匹配' },
                { text: '0.1+0.2问题', link: '/知识库/前端/0.算法/25-37-为什么0.1+0.2!==0.3' }
              ]
            },
            {
              text: '1. 三剑客',
              collapsed: true,
              items: [
                {
                  text: 'CSS',
                  collapsed: true,
                  items: [
                    { text: '垂直对齐', link: '/知识库/前端/1.三剑客/css/垂直对齐' },
                    { text: '弹性宽度设计', link: '/知识库/前端/1.三剑客/css/弹性宽度设计和文本处理' },
                    { text: '盒模型', link: '/知识库/前端/1.三剑客/css/盒模型' },
                    { text: '圣杯布局', link: '/知识库/前端/1.三剑客/css/圣杯布局 (Holy Grail Layout)' },
                    { text: '视口单位', link: '/知识库/前端/1.三剑客/css/视口单位' },
                    { text: '水平对齐', link: '/知识库/前端/1.三剑客/css/水平对齐' },
                    { text: '响应式字体', link: '/知识库/前端/1.三剑客/css/响应式字体' },
                    { text: '行高继承', link: '/知识库/前端/1.三剑客/css/行高继承' },
                    { text: 'BFC', link: '/知识库/前端/1.三剑客/css/BFC (块格式化上下文)' },
                    { text: 'CSS定位', link: '/知识库/前端/1.三剑客/css/CSS 定位' },
                    { text: 'Flex骰子布局', link: '/知识库/前端/1.三剑客/css/Flex 骰子布局' },
                    { text: 'margin负值', link: '/知识库/前端/1.三剑客/css/margin负值' },
                    { text: 'margin纵向重叠', link: '/知识库/前端/1.三剑客/css/margin纵向重叠' },
                    { text: 'CSS知识库', link: '/知识库/前端/1.三剑客/css/学习/CSS 完整知识库与面试宝典' },
                    { text: 'CSS3开发文档', link: '/知识库/前端/1.三剑客/css/学习/CSS3 完整开发文档与面试指南' },
                    { text: 'Tailwind CSS', link: '/知识库/前端/1.三剑客/css/学习/Tailwind CSS 零基础实战指南' }
                  ]
                },
                {
                  text: 'JavaScript',
                  collapsed: true,
                  items: [
                    {
                      text: '基础知识',
                      collapsed: true,
                      items: [
                        { text: '闭包', link: '/知识库/前端/1.三剑客/js/基础知识/闭包概念' },
                        { text: '继承', link: '/知识库/前端/1.三剑客/js/基础知识/继承开发' },
                        { text: 'bind实现', link: '/知识库/前端/1.三剑客/js/基础知识/模拟版本 bind1' },
                        { text: '深拷贝', link: '/知识库/前端/1.三剑客/js/基础知识/深拷贝函数' },
                        { text: '事件处理', link: '/知识库/前端/1.三剑客/js/基础知识/事件处理' },
                        { text: '同步异步', link: '/知识库/前端/1.三剑客/js/基础知识/同步异步' },
                        { text: '事件冒泡', link: '/知识库/前端/1.三剑客/js/基础知识/阻止事件冒泡和默认行为，防止页面滚动' },
                        { text: 'Promise和async', link: '/知识库/前端/1.三剑客/js/基础知识/Promise和async await' }
                      ]
                    },
                    {
                      text: '异步进阶',
                      collapsed: true,
                      items: [
                        { text: '异步面试题', link: '/知识库/前端/1.三剑客/js/js-异步进阶/异步编程核心概念的面试题' },
                        { text: 'Event Loop', link: '/知识库/前端/1.三剑客/js/js-异步进阶/Event Loop（事件循环）' }
                      ]
                    },
                    {
                      text: 'Web API',
                      collapsed: true,
                      items: [
                        { text: '事件绑定', link: '/知识库/前端/1.三剑客/js/js-web-api/通用事件绑定函数' },
                        { text: 'Ajax工具', link: '/知识库/前端/1.三剑客/js/js-web-api/ajax 工具函数' },
                        { text: 'DOM操作', link: '/知识库/前端/1.三剑客/js/js-web-api/DOM 操作核心知识开发文档' },
                        { text: 'Map数据结构', link: '/知识库/前端/1.三剑客/js/js-web-api/Map数据结构' }
                      ]
                    },
                    {
                      text: 'JS基础',
                      collapsed: true,
                      items: [
                        { text: '深度比较', link: '/知识库/前端/1.三剑客/js/js基础/深度比较两个 JavaScript 变量' },
                        { text: '数组扁平化', link: '/知识库/前端/1.三剑客/js/js基础/数组扁平化函数' },
                        { text: '数组操作', link: '/知识库/前端/1.三剑客/js/js基础/JavaScript 中常用的数组操作' }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              text: '2. Vue学习',
              collapsed: true,
              items: [
                {
                  text: '基础知识',
                  collapsed: true,
                  items: [
                    { text: 'data属性', link: '/知识库/前端/2.vue学习/基础知识/data属性' },
                    { text: 'SPA性能优化', link: '/知识库/前端/2.vue学习/基础知识/SPA 性能优化, 首屏加载,' },
                    { text: 'v-if和v-for', link: '/知识库/前端/2.vue学习/基础知识/v-if和 v-for 的基本作用' },
                    { text: 'Vue深度解析', link: '/知识库/前端/2.vue学习/基础知识/Vue  深度解析与实践文档' },
                    { text: '数据格式化', link: '/知识库/前端/2.vue学习/基础知识/Vue 2 数据格式化' },
                    { text: '响应式陷阱', link: '/知识库/前端/2.vue学习/基础知识/Vue 2 中一个常见的响应式陷阱' },
                    { text: 'Vue3 vs Vue2', link: '/知识库/前端/2.vue学习/基础知识/Vue 3 vs. Vue 2' },
                    { text: '权限管理', link: '/知识库/前端/2.vue学习/基础知识/Vue 权限管理' },
                    { text: '生命周期', link: '/知识库/前端/2.vue学习/基础知识/Vue 生命周期' },
                    { text: 'Vue实例化', link: '/知识库/前端/2.vue学习/基础知识/Vue 实例化 生命周期' },
                    { text: '项目架构', link: '/知识库/前端/2.vue学习/基础知识/Vue 项目架构' },
                    { text: '修饰符', link: '/知识库/前端/2.vue学习/基础知识/Vue 修饰符' },
                    { text: '虚拟DOM', link: '/知识库/前端/2.vue学习/基础知识/Vue 虚拟DOM' },
                    { text: 'v-if和v-show', link: '/知识库/前端/2.vue学习/基础知识/Vue 指令 v-if v-show' },
                    { text: '错误处理', link: '/知识库/前端/2.vue学习/基础知识/Vue 中错误处理' },
                    { text: '自定义指令', link: '/知识库/前端/2.vue学习/基础知识/Vue 自定义指令' },
                    { text: '组件化slot', link: '/知识库/前端/2.vue学习/基础知识/Vue 组件化 slot 插槽 内容分发' },
                    { text: '组件通信', link: '/知识库/前端/2.vue学习/基础知识/Vue 组件通信' },
                    { text: 'keep-alive', link: '/知识库/前端/2.vue学习/基础知识/Vue keep-alive' },
                    { text: 'key属性', link: '/知识库/前端/2.vue学习/基础知识/Vue key' },
                    { text: 'nextTick', link: '/知识库/前端/2.vue学习/基础知识/Vue nextTick' },
                    { text: 'SSR', link: '/知识库/前端/2.vue学习/基础知识/Vue SSR' },
                    { text: 'diff算法', link: '/知识库/前端/2.vue学习/基础知识/vue的diff算法' },
                    { text: '前端路由', link: '/知识库/前端/2.vue学习/基础知识/Vue前端路由' },
                    { text: '双向数据绑定', link: '/知识库/前端/2.vue学习/基础知识/Vue双向数据绑定' },
                    { text: '部署404问题', link: '/知识库/前端/2.vue学习/基础知识/Vue项目部署404问题' },
                    { text: '跨域问题', link: '/知识库/前端/2.vue学习/基础知识/Vue项目跨域问题' }
                  ]
                },
                {
                  text: '模块功能',
                  collapsed: true,
                  items: [
                    { text: 'axios题目', link: '/知识库/前端/2.vue学习/模块/网络模块-axios/axios 题目' },
                    { text: 'axios使用', link: '/知识库/前端/2.vue学习/模块/网络模块-axios/axios' },
                    { text: 'Excel库', link: '/知识库/前端/2.vue学习/模块/excel导入导出/库' },
                    { text: 'Excel-xlsx', link: '/知识库/前端/2.vue学习/模块/excel导入导出/Vue 3 轻松搞定 Excel（xlsx SheetJS)' },
                    { text: 'Excel-exceljs', link: '/知识库/前端/2.vue学习/模块/excel导入导出/Vue3 exceljs库实现前端导入导出Excel' },
                    { text: 'Pinia权限管理', link: '/知识库/前端/2.vue学习/模块/pinia+权限管理+角色管理+路由拦截/项目介绍' },
                    { text: '业务逻辑面试题', link: '/知识库/前端/2.vue学习/模块/pinia+权限管理+角色管理+路由拦截/业务逻辑面试题' }
                  ]
                }
              ]
            },
            {
              text: '3. 微信小程序',
              collapsed: true,
              items: [
                { text: '小程序开发文档', link: '/知识库/前端/3.微信小程序/微信小程序完整开发学习文档' },
                {
                  text: '功能模板',
                  collapsed: true,
                  items: [
                    { text: '微信登录', link: '/知识库/前端/3.微信小程序/模板/微信登录/微信登录解析和代码' },
                    { text: '订阅消息-代码', link: '/知识库/前端/3.微信小程序/模板/微信订阅功能/微信订阅消息-代码' },
                    { text: '订阅消息-文档', link: '/知识库/前端/3.微信小程序/模板/微信订阅功能/微信订阅消息实现文档' },
                    { text: '微信支付-代码', link: '/知识库/前端/3.微信小程序/模板/微信支付/微信支付代码' },
                    { text: '微信支付-架构', link: '/知识库/前端/3.微信小程序/模板/微信支付/微信支付技术架构深度解析' },
                    { text: '微信支付-准备', link: '/知识库/前端/3.微信小程序/模板/微信支付/微信支付全景认知与准备工作' }
                  ]
                }
              ]
            },
            {
              text: '4. uni-app学习',
              collapsed: true,
              items: [
                { text: '基础知识', link: '/知识库/前端/4..uniapp学习/基础/基础知识' },
                { text: 'uniapp基础', link: '/知识库/前端/4..uniapp学习/基础/uniapp基础知识' }
              ]
            }
          ]
        }
      ],
      
      /**
       * ========================================
       * 前端三剑客分类侧边栏 - 嵌套结构示例
       * ========================================
       * 
       * 文件结构：
       * 1.三剑客/
       * ├── index.md
       * ├── HTML/
       * │   ├── 基础.md
       * │   └── HTML5.md
       * ├── CSS/
       * │   ├── 基础.md
       * │   ├── Flexbox.md
       * │   └── Grid.md
       * └── JavaScript/
       *     ├── 基础.md
       *     ├── ES6.md
       *     └── 异步编程.md
       */
    },

    /**
     * ========================================
     * 社交链接配置
     * ========================================
     * 
     * 显示在导航栏右侧
     * 支持的图标：github, twitter, discord 等
     */
    socialLinks: [
      { 
        icon: 'github', 
        link: 'https://github.com/xiaojie225/Knowledge-Base' 
      }
    ],
    
    /**
     * ========================================
     * 页脚配置
     * ========================================
     */
    footer: {
      message: '基于 VitePress 构建',
      copyright: 'Copyright © 2025-present'
    },
    
    /**
     * ========================================
     * 文档页脚（上一页/下一篇）
     * ========================================
     */
    docFooter: {
      prev: '上一篇',
      next: '下一篇'
    },
    
    /**
     * ========================================
     * 大纲（目录）配置
     * ========================================
     * 
     * 显示在页面右侧的文章大纲
     */
    outline: {
      /**
       * 显示的标题级别
       * [2, 3] 表示显示 h2 和 h3 标题
       */
      level: [2, 3],
      label: '本页目录'
    },
    
    /**
     * ========================================
     * 最后更新时间配置
     * ========================================
     */
    lastUpdated: {
      text: '最后更新于',
      formatOptions: {
        dateStyle: 'short',
        timeStyle: 'medium'
      }
    },
    
    /**
     * ========================================
     * 搜索功能配置
     * ========================================
     * 
     * VitePress 内置本地搜索功能
     */
    search: {
      provider: 'local',
      options: {
        locales: {
          root: {
            translations: {
              button: {
                buttonText: '搜索文档',
                buttonAriaLabel: '搜索文档'
              },
              modal: {
                noResultsText: '无法找到相关结果',
                resetButtonTitle: '清除查询条件',
                footer: {
                  selectText: '选择',
                  navigateText: '切换',
                  closeText: '关闭'
                }
              }
            }
          }
        }
      }
    }
  },
  
  /**
   * ============================================
   * Markdown 配置
   * ============================================
   */
  markdown: {
    /**
     * 代码块主题
     * 支持浅色和深色模式
     */
    theme: {
      light: 'github-light',
      dark: 'github-dark'
    },
    
    /**
     * 显示代码块行号
     */
    lineNumbers: true
  }
})
